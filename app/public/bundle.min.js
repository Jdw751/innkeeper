/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	__webpack_require__(1);
	__webpack_require__(2);
	__webpack_require__(3);
	__webpack_require__(4);
	__webpack_require__(5);
	__webpack_require__(6);
	__webpack_require__(7);
	__webpack_require__(8);
	__webpack_require__(9);
	__webpack_require__(10);
	__webpack_require__(11);
	__webpack_require__(12);
	__webpack_require__(13);
	module.exports = __webpack_require__(14);


/***/ },
/* 1 */
/***/ function(module, exports) {

	var app = angular.module("mainApp",['ngRoute','loginModule','registerModule','reimbursementApp','maintenanceApp','ApartmentApp']);
	var reimbursement = angular.module('reimbursementApp', ['ui.router']);
	var register = angular.module('registerModule', []);
	var login = angular.module('loginModule', []);
	var Apartment = angular.module('ApartmentApp', []);
	var maintenance = angular.module('maintenanceApp', []);

	app.constant('seshkeys',{
		fname: "fname",
		lname: "lname",
		username: "username",
		aptid: "aptId",
		isadmin: "isAdmin",
		serviceurl: "serviceUrl",
		securedurl: "securedUrl"
	});

	// set the service url based on dev localhost or prod domain url
	app.run(function($window,$location,seshkeys){
		var domain = $location.host();

		if (domain && domain !== 'localhost') {
			domain = $location.host();
		}

		$window.sessionStorage.setItem(seshkeys.serviceurl, 'http://' + domain + ':3030');
		$window.sessionStorage.setItem(seshkeys.securedurl, 'https://' + domain + ':3030');

	});

	app.controller('NavbarCtrl',function($scope,$http, $location,$window,seshkeys,$timeout){

		$scope.$on('$locationChangeStart', function(){
	    	$scope.online = isOnline($window, seshkeys);
	    	$scope.admin = isAdmin($window, seshkeys);
	    	console.log($scope.admin);
	    	$scope.greetingMessage = $window.sessionStorage.getItem(seshkeys.fname) + " " + $window.sessionStorage.getItem(seshkeys.lname);
	    });

	    $scope.$on('$locationChangeStart', function(){
			if($scope.online === false && !$location.path().includes('register')){
				$location.path('/login');
			}
		});

		$scope.isActive = function (viewLocation) {
	        return $location.path().includes(viewLocation);
	    };

		$scope.logout=function()
		{
			clearStorage($window, seshkeys);
			$http.get('http://localhost:3030/logout');
			$scope.online = isOnline($window, seshkeys);
			$timeout(function(){
				$location.path('/login');
			},2000);
		};

		$scope.online = isOnline($window, seshkeys);

		$scope.admin = false;

	});

	function clearStorage(window, seshkeys){
		window.sessionStorage.setItem(seshkeys.username, "");
	 	window.sessionStorage.setItem(seshkeys.fname, "");
	 	window.sessionStorage.setItem(seshkeys.lname,"");
	 	window.sessionStorage.setItem(seshkeys.aptid, "");
	 	window.sessionStorage.setItem(seshkeys.isadmin, "");
	}

	function isOnline(window,seshkeys){
		if(window.sessionStorage.getItem(seshkeys.username)===null||window.sessionStorage.getItem(seshkeys.username)==="")
		{
			return false;
		}
		else{
			return true;
		}
	};

	function isAdmin(window, seshkeys){
		console.log(window.sessionStorage.getItem(seshkeys.isadmin));
		if(window.sessionStorage.getItem(seshkeys.isadmin)==="true")
		{
			return true;
		}
		else{
			return false;
		}
	};

	app.config(function($routeProvider) {
		$routeProvider
		.when("/apartments", {
			templateUrl: "Room_Apt/views/aptPage.html",
			controller: "apt_list_user"
		})
		.when("/apartments/manage",{
			templateUrl: "Room_Apt/views/apt_admin.html",
			controller: "apt_list_admin"
		})
		.when("/maintenance", {
			templateUrl: "Maintenance/views/Maintenance.html",
			controller: "maintenanceCtrl"
		})
		.when("/maintenance/manage", {
			templateUrl: "Maintenance/views/MaintenanceAdmin.html",
			controller: "maintenanceAdminCtrl"
		})
		.when("/reimbursement", {
			templateUrl: "reimbursement/views/reimbursement.html",
			controller: "BurseCtrl"
		})
		.when("/reimbursement/manage",{
			templateUrl: "reimbursement/views/reimbursement_admin.html",
			controller: "BurseAdminCtrl"
		})
		.when("/login", {
			templateUrl: "loginRegistration/views/login.html",
			controller: "loginCtrl"
		})
		.when("/register", {
			templateUrl: "loginRegistration/views/register.html",
			controller: "registerCtrl"
		})
	});


/***/ },
/* 2 */
/***/ function(module, exports) {

	var login = angular.module('loginModule');

	login.controller('loginCtrl', function($scope,$window,loginFactory,seshkeys,$location,$timeout){
		
		$scope.login = function(){
			var promise = loginFactory.tryLogin($scope.loginUsername, $scope.loginPassword);
			promise.then(
				function(userData){
					if(userData.data.length > 1){
						$timeout(function(){
							alert("Invalid username/password");
							$location.path('/login');
						});
					}else{
						storeSession($window,userData.data.user,seshkeys);

						if(userData.data.user.isAdmin===true){
							$location.path('/reimbursement/manage');
						}else {
							$location.path('/reimbursement');
						}
					}
				},function(err)
				{
					$timeout(function(){
						alert("Invalid username/password");
						$location.path('/login');
					});
				}
			);
		};
	});

	function storeSession(window,data,seshkeys){
	 	window.sessionStorage.setItem(seshkeys.username, data.username);
	 	window.sessionStorage.setItem(seshkeys.fname, data.fname);
	 	window.sessionStorage.setItem(seshkeys.lname, data.lname);
	 	window.sessionStorage.setItem(seshkeys.aptid, data.aptId);
	 	window.sessionStorage.setItem(seshkeys.isadmin, data.isAdmin);
	};

/***/ },
/* 3 */
/***/ function(module, exports) {

	var register = angular.module('registerModule');

	register.controller('registerCtrl', function($scope,registerFactory,$http,$location){

		var errors = false;
			
		$scope.register = function(){

			var userObj = {
				username: $scope.registerUsername,
				password: $scope.registerPassword,
				email: $scope.registerEmail,
				fname: $scope.registerFname,
				lname: $scope.registerLname,
				isAdmin: false,
				aptId: null
			};

			checkBody(userObj.username,'Username');
			checkBody(userObj.password,'Password');
			checkBody(userObj.email,'Email');
			checkBody(userObj.fname,'First Name');
			checkBody(userObj.lname,'Last Name');
			checkBody($scope.registerPassword2,'Confirm Password');
			isMatch($scope.registerPassword,$scope.registerPassword2);

			if(errors===true)
			{
				reset();
				errors = false;
			}else{
				registerFactory.createUser(userObj).then(
					function(){
						$location.path('/login');
					},
					function(err){
						alert(err.data.error);
						$scope.registerUsername = "";
						$scope.registerPassword = "";
						$scope.registerPassword2 = "";
					}
				);
			}
		};	
	});

	var checkBody = function(field, fieldName){
		if(!field) {
			errors = true;
			alert(fieldName + " is required.");
		}
	};

	var isMatch = function(p1,p2)
	{
		if(p1!=p2)
		{
			errors = true;
			alert("Passwords do not match");
		}
	};

	var reset = function()
	{
		$scope.registerUsername = "";
		$scope.registerPassword = "";
		$scope.registerPassword2 = "";
		$scope.registerEmail = "";
		$scope.registerFname = "";
		$scope.registerLname = "";
	};

/***/ },
/* 4 */
/***/ function(module, exports) {

	var login = angular.module('loginModule');

	login.factory('loginFactory', function($http,$window,$timeout,seshkeys){

		var factory = {};

			factory.tryLogin = function(username, password){
				return $http.post($window.sessionStorage.getItem(seshkeys.serviceurl) + '/login', {username: username, password: password});
			};
		return factory;
	});


/***/ },
/* 5 */
/***/ function(module, exports) {

	var register = angular.module('registerModule');

	register.factory('registerFactory', function($http,$window,seshkeys){

		var factory = {};

		factory.createUser = function(data){
			return $http.post($window.sessionStorage.getItem(seshkeys.serviceurl) + '/createUser', data);
		};

		return factory;
	});


/***/ },
/* 6 */
/***/ function(module, exports) {

	var maintenance = angular.module('maintenanceApp');

	maintenance.controller("maintenanceAdminCtrl", function($scope,dataAdminFactory,seshkeys){
		$scope.ticketSubmission = [];
		$scope.ticketHistory = [];
		$scope.categories = dataAdminFactory.getCategories();
		$scope.changedTicket = {};

		var getAllTickets = function()
		{
			var result = [];

			dataAdminFactory.getAllTickets()
			.then(
				function(data)
				{
					result = data.data;
					$scope.ticketHistory = result;
					// console.log($scope.ticketHistory);

				},
				function(err)
				{
					alert('getAllTickets'+err);
				}
				);
			return result;

		};

		getAllTickets();
		// console.log($scope.ticketHistory);
			$scope.submitNewTicket  = function(){
		 	// console.log($scope.ticket);

		 	$scope.ticketSubmission.push({
				category:$scope.ticket.category,
				description:$scope.ticket.description,
				startDate:new Date(),
				completeDate:'',
				status:'Submitted',
				aptID:seshkeys.aptId,
				usr:seshkeys.username
		 		});

		 	// console.log($scope.ticketSubmission);

		 		dataAdminFactory.submitNewTicket($scope.ticketSubmission[0])
		 		.then(
		 			function(){
		 				$scope.ticketSubmission.pop();
		 				newTicket.$setPristine();
		 				newTicket.$setUntouched();
		 				$scope.ticket.category
		 			},
		 			function(){
		 				alert('failed ticket submission');
		 			}
		 			);
		 };

		 $scope.getTicketById = function(id, callback){
		 	dataAdminFactory.getTicketById(id)
		 	.then(
		 		function(result)
		 		{
		 			callback(result);
		 		},
		 		function(err){

		 			alert('failed to get ticket');
		 		}
		 		);
		 };

		$scope.updateTicket = function(id){// updates a ticket

			$scope.getTicketById(id, function(result) {//gets a particular ticket by it's (_id)

				for (var i = 0; i < $scope.ticketHistory.length; i++) {
					if (id == $scope.ticketHistory[i]._id) {

						$scope.changedTicket = $scope.ticketHistory[i];//
						// console.log($scope.changedTicket);
						dataAdminFactory.updateTicket($scope.changedTicket)//change
						 .then(
						 	function(data){
						 	},
						 	function(){
						 		//alert('Failed Update');
						 	}
						 );
					}
				}
			});
		};
	});


/***/ },
/* 7 */
/***/ function(module, exports) {

	var maintenance = angular.module('maintenanceApp', []);

	maintenance.controller('maintenanceCtrl', function($scope,dataAdminFactory,seshkeys){
		$scope.newTicket = [];
		$scope.ticketHistory = [];
		$scope.ticketSubmission = [];
		
		var getTicketsByUser = function(username)
		{
			var result = [];
			//console.log(dataAdminFactory);
			//console.log(dataAdminFactory.hasOwnProperty('getTicketsByUser'));
			dataAdminFactory.getTicketsByUser(username)
			.then(
				function(data)
				{
					result = data.data;
					$scope.ticketHistory = result;
					console.log($scope.ticketHistory);

					// console.log(result);
					//$scope.ticketHistory = data.data;
				},
				function(err)
				{
					alert(err);
				}
				);
			return result;

		};
		
		getTicketsByUser(seshkeys.username);//pass session key of user

		$scope.submitNewTicket  = function(){
		 	// console.log($scope.ticket);

		 	$scope.ticketSubmission.push({
				category:$scope.ticket.category,
				description:$scope.ticket.description,
				startDate:new Date(),
				completeDate:'',
				status:'Submitted',
				aptID:seshkeys.aptId,
				usr:seshkeys.username 
		 		});
		 	
		 	// console.log($scope.ticketSubmission);

		 		dataAdminFactory.submitNewTicket($scope.ticketSubmission[0])
		 		.then(
		 			function(){
		 				$scope.ticketSubmission.pop();
		 			},
		 			function(){
		 				alert('failed ticket submission');
		 			}
		 			);

		 	
		 	
		 };

	});

/***/ },
/* 8 */
/***/ function(module, exports) {

	var maintenance = angular.module('maintenanceApp');

	maintenance.factory('dataAdminFactory', function($http,seshkeys, $window){

		var url = $window.sessionStorage.getItem(seshkeys.serviceurl);
		var factory = {};

		factory.getAllTickets = function(){// returns all the tickets
			return $http.get(url+'/maintenanceCheck/');

		};

		factory.getCategories = function(){ // incomplete returns all the distinct categories from db
			return["Request Item","Missing Item","Broken Item"];
		};

		factory.getStatus = function(){//incomplte returns all the distinct status from db
			return['Submitted','In-Progress','Complete'];
		};

		factory.getTicketById = function(id){//returns id of a particular ticket
			
			return $http.get(url+'/maintenanceTicket/' + id);
		};

		factory.updateTicket = function(data){//updates a particular ticket
			return $http.post(url+'/maintenanceUpdate/',data);

		};

		factory.getTicketsByUser = function(username){//gets all ticket by a particular user
			return $http.get(url+'/maintenanceCheck/' + username);
		};


		factory.submitNewTicket = function(data){//sumbmit a single ticket
			return $http.post(url+'/maintenanceCheck/', data);
			
		};

		return factory;
	});


/***/ },
/* 9 */
/***/ function(module, exports) {

	var maintenance = angular.module('maintenanceApp');

	maintenance.factory('dataFactory', function($http, seshkeys, $window){
		
		var url = $window.sessionStorage.getItem(seshkeys.serviceurl);
		var factory = {};

		factory.getTicketsByUser = function(){
			return $http.get(url+'/maintenanceCheck/');
		};

		return factory;

		});


/***/ },
/* 10 */
/***/ function(module, exports) {

	var reimbursement = angular.module('reimbursementApp');

	reimbursement.controller("BurseAdminCtrl", function($scope, burseService, $timeout){

		var getAllReimbursements = function(){
			burseService.getAllReimbursements()
			.then(
				function(data){
					$scope.burseHistory = data.data;
					$scope.emptyHistory = emptyHistory($scope.burseHistory);
					$scope.selected = false;
				},
				function(){
					alert("Failed to retreive reimbursements...");
				}
			);
		};

		$scope.setSidebarActive = function(event){
			var buttons = document.getElementsByClassName("navButton");
			var i;
			for (i = 0;i < buttons.length;i++){
				angular.element(buttons[i]).removeClass("active");
			}
			angular.element(event.target).parent().addClass("active");
		};

		$scope.display = function(id){
			burseService.getReimbursementById(id).then(
				function(result){
					$scope.displayBurse = result.data;
					$scope.selected = true;
					$scope.completed = checkCompleted($scope.displayBurse);
				},
				function(){
					alert("Error retreiving reimbursement...");
				}
			);
		};

		$scope.makeDecision = function(decision){
			burseService.updateReimbursement($scope.displayBurse, decision)
			.then(
				function(data){
					if($scope.pending){
						getAllReimbursements();
					}else{
						$scope.display($scope.displayBurse._id);
					}
					
				},
				function(){
					alert("Update failed...")
				}
			);
		};

		$scope.reset = function(){
			getAllReimbursements();
		};

		$scope.filterForPending = function(item){
			if($scope.pending && item.status==="In Progress"){
				return true;
			}
			else if($scope.pending === false || $scope.pending === undefined){
				return true;
			}
			else {
				return false
			}
		};

		$scope.burseHistory = [];
		$scope.emptyHistory = true;
		$scope.displayBurse = {};
		$scope.selected = false;
		$scope.completed = false;
		getAllReimbursements();
	});

	function checkCompleted(burse){
		if (burse.status === "In Progress"){
			return true;
		}
		else {
			return false;
		}
	};

	function emptyHistory(history){
		if(history.length === 0){
			return true;
		}
		else {
			return false;
		}
	};

/***/ },
/* 11 */
/***/ function(module, exports) {

	var reimbursement = angular.module('reimbursementApp');

	reimbursement.controller("BurseCtrl", function($scope, burseService, $window, seshkeys) {

		var getReimbursementsByUsername = function(){
			burseService.getReimbursementsByUsername(username)
			.then(
				function(result){
					$scope.burseHistory = result.data;
					$scope.emptyHistory = emptyHistory($scope.burseHistory);
				},
				function(){
					alert("Failed to retreive reimbursements...");
				}
			);
		};

		$scope.addReimbursement = function() {
			if (checkEmptyBurse($scope.burseSubmit)){
				alert("Must complete previous rows before adding another");
			}
			else {
				$scope.burseSubmit.push({date:"",type:"Select a Type",desc:"",amount:"",status:"In Progress",usrname:username,name:name});
			}
		};

		$scope.submitReimbursement = function() {
			console.log($scope.burseSubmit);
			if (checkEmptyBurse($scope.burseSubmit)){
				alert("Must complete all rows before submitting");
			}
			else {
				burseService.addReimbursement($scope.burseSubmit).then(
					function(){
						$scope.burseSubmit = [{date:"",type:"Select a Type",desc:"",amount:"",status:"In Progress",usrname:username,name:name}];
						getReimbursementsByUsername();
					},
					function(){
						alert("Failed to submit reimbursements...");
					}
				);
			}
		};

		$scope.removeReimbursement = function(index){
			$scope.burseSubmit.splice(index,1);
		};

		var name = $window.sessionStorage.getItem(seshkeys.fname)+" "+$window.sessionStorage.getItem(seshkeys.lname);
		var username = $window.sessionStorage.getItem(seshkeys.username);
		$scope.types = burseService.getTypesOfBurse();
		$scope.burseSubmit = [{date:"",type:"Select a Type",desc:"",amount:"",status:"In Progress",usrname:username,name:name}];
		$scope.burseHistory = [];
		getReimbursementsByUsername();
		$scope.emptyHistory = emptyHistory($scope.burseHistory);
	});

	function checkEmptyBurse(data){
		var empty = false;
		for (index in data){
			if(data[index].date === "" ||
				data[index].type === "Select a Type" ||
				data[index].desc === "" ||
				data[index].amount === ""){
				empty = true;
			}
		}
		return empty;
	};

	function emptyHistory(history){
		if(history.length === 0){
			return true;
		}
		else {
			return false;
		}
	};

	reimbursement.config(function($stateProvider){
		$stateProvider
		.state('history',{
			url: '/reimbursement',
			templateUrl: 'reimbursement/views/reimbursement_history.html'
		})
		.state('submit',{
			templateUrl: 'reimbursement/views/reimbursement_submit.html'
		});
	});


/***/ },
/* 12 */
/***/ function(module, exports) {

	var reimbursement = angular.module('reimbursementApp');

	reimbursement.factory("burseService", function($http,$window,seshkeys){

		var service = {};

		service.getTypesOfBurse = function(){
			return ["Travel","Certification","Supplies"];
		};

		service.getReimbursementById = function(id){
			return $http.get($window.sessionStorage.getItem(seshkeys.serviceurl)+'/reimbursements/'+id);
		};

		service.getReimbursementsByUsername = function(username){
			return $http.get($window.sessionStorage.getItem(seshkeys.serviceurl)+'/reimbursement/'+username);
		};

		service.getAllReimbursements = function(){
			return $http.get($window.sessionStorage.getItem(seshkeys.serviceurl)+'/reimbursements/');
		};

		service.addReimbursement = function(data){
			return $http.post($window.sessionStorage.getItem(seshkeys.serviceurl)+'/reimbursements/', data);
		};

		service.updateReimbursement = function(data,decision){
			return $http.post($window.sessionStorage.getItem(seshkeys.serviceurl)+'/reimbursements/'+data._id+"/"+decision);
		};

		return service;
	});


/***/ },
/* 13 */
/***/ function(module, exports) {

	
	/*app.controller('apt_list_user', function($scope, myserv) {
	     $scope.apt=myserv.func();
	});*/
	var Apartment = angular.module('ApartmentApp');
	Apartment.controller('apt_list_admin', function($scope, $window, seshkeys, myfact) {
	    var apt = {};
	    var usr = {};
	    var apt2={};
	    var id;
	    $scope.hide = false;//Used for ng-shows and hides in html
	    $scope.show = false;
	    $scope.hidden = true;
	    $scope.sheath = false;
	    $scope.Apartmenthide=true;
	    $scope.Userhide=true;
	    $scope.Lookuphide=true;
	    $scope.dynamic=true;
	    var list = [];
	    var newUser = [];
	    myfact.getUser()//finds all users in our database
	        .then(
	            function(data) {
	                usr = data.data;
	            }
	        );
	    myfact.getAllApartments()//finds all apartment in database
	        .then(
	            function(data) {
	                apt = data.data;
	            });
	    $scope.trigger = function() {
	            myfact.getUser()
	        .then(
	            function(data) {
	                usr = data.data;
	            }
	        );
	        myfact.getAllApartments()
	        .then(
	            function(data) {
	                apt = data.data;
	            });
	         $scope.newUser=[];
	         $scope.aptList=[];
	         for (x in apt) {
	                $scope.aptList.push(apt[x].addr)
	        }
	        for (x in usr) {
	            if (usr[x].aptId === null||usr[x].aptId === "null") {
	                $scope.newUser.push(usr[x].username)
	            }
	        };
	        $scope.sheath = true;
	    };
	    $scope.search = function() {
	            myfact.getUser()
	        .then(
	            function(data) {
	                usr = data.data;
	            }
	        );
	        for (x in usr) {
	            if (usr[x].username === $scope.username) {
	                id = usr[x].aptId;
	                break;
	            }
	        };
	        for (x in apt) {
	            if (apt[x]._id === id) {
	                $scope.data = apt[x];
	                $scope.show = true;
	            }
	        }
	    };
	    var x = false;
	    $scope.dosomething = function(event, username) {
	        if (event.which === 13) {
	            $scope.search(username);
	        }
	    };
	    $scope.anotherApt = function() {
	        if ($scope.aptNum === undefined || $scope.Street === undefined || $scope.State === undefined || $scope.City === undefined || $scope.Zip === undefined || $scope.SuiteNo === undefined) {
	            confirm("Value was left blank");
	        } else {
	            for(a in apt){
	                if (($scope.aptNum === apt[a].addr.num) && ($scope.Street === apt[a].addr.street) && ($scope.City === apt[a].addr.city) &&( $scope.Zip === apt[a].addr.zip ) && ($scope.SuiteNo === apt[a].addr.suite)){
	                    confirm('apartment taken');
	                    break;
	                }
	                else{
	                apt.addr = {
	                "num": $scope.aptNum,
	                "street": $scope.Street,
	                "state": $scope.State,
	                "city": $scope.City,
	                "zip": $scope.Zip,
	                "suite": $scope.SuiteNo
	            };
	            $scope.hide = true;
	            break;
	                }
	            }
	        };
	    }
	    $scope.updateApt = function() {
	        if ($scope.chairs === undefined || $scope.beds === undefined) {
	            confirm("Value was left blank");
	        }
	        apt.rooms = [{
	            "bedrooms": [{
	                "room": {
	                    "chair": $scope.chairs,
	                    "bed": $scope.beds
	                }
	            }, {
	                "room": {
	                    "chair": $scope.chairs,
	                    "bed": $scope.beds
	                }
	            }, {
	                "room": {
	                    "chair": $scope.chairs,
	                    "bed": $scope.beds
	                }
	            }, {
	                "room": {
	                    "chair": $scope.chairs,
	                    "bed": $scope.beds
	                }
	            }, {
	                "room": {
	                    "chair": $scope.chairs,
	                    "bed": $scope.beds
	                }
	            }, {
	                "room": {
	                    "chair": $scope.chairs,
	                    "bed": $scope.beds
	                }
	            }]
	        }];
	        myfact.addApartment(apt);
	         $scope.aptNum="";
	        $scope.Street="";
	         $scope.State="";
	        $scope.City="";
	        $scope.Zip="";
	        $scope.SuiteNo="";
	        $scope.hide = false;
	    };
	    $scope.changeApt = function() {
	        $scope.hidden = false;
	        $scope.show = false;
	    };
	    $scope.editApt = function() {
	        myfact.updateUser($scope.username, $scope.NewAptID);
	    };
	    $scope.assign = function(username) {
	       /* var AptID = prompt('Please input new apartment ID');*/
	        /*myfact.updateUser(username, AptID);*/
	/*        names.splice(index, 1);*/
	       $scope.usernames=username;
	        $scope.dynamic=false;
	    };
	    $scope.assign2 = function() {
	        myfact.updateUser($scope.username, null);
	        $window.sessionStorage.setItem(seshkeys.aptid,null);
	        myfact.getUser()
	            .then(
	                function(data) {
	                    usr = data.data;
	                }
	            );
	        $scope.username="";
	        $scope.data="";
	        $scope.NewAptID="";
	        $scope.hidden=true;
	        $scope.trigger();
	    };
	    $scope.assign3=function(index){
	        myfact.updateUser($scope.usernames, apt[index]._id);
	        confirm('This user has now been assigned an apartment');
	         $scope.dynamic=true;
	         $scope.sheath=false;
	        };
	    $scope.iDGen = function() {
	        $scope.AptId = $scope.aptNum;
	    };
	    $scope.Lookup=function(){
	            $scope.Apartmenthide=true;
	            $scope.Userhide=true;
	            $scope.Lookuphide=false;
	            $scope.sheath=false;
	            $scope.newUser=[];
	            $scope.dynamic=true;
	    };
	    $scope.New=function(){
	        $scope.Apartmenthide=false;
	            $scope.Userhide=true;
	            $scope.Lookuphide=true;
	            $scope.sheath=false;
	            $scope.newUser=[];
	            $scope.dynamic=true;
	    };
	    $scope.Vacant=function(){
	        $scope.Apartmenthide=true;
	            $scope.Userhide=false;
	            $scope.Lookuphide=true;
	            $scope.sheath=false;
	            $scope.newUser=[];
	    };
	}
	    );
	Apartment.controller('apt_list_user', function($scope, $window, seshkeys, myfact) {
	    var usr = {};
	    var apt = {};
	    var id;
	    $scope.data = {};
	    var getAllUsers = function() {
	        myfact.getAllApartments()
	            .then(
	                function(data) {
	                    apt = data.data;
	                    display();
	                },
	                function(err) {
	                    console.log(err);
	                }
	            );

	    };
	    var display = function() {
	        for (x in apt) {
	            if (apt[x]._id === $window.sessionStorage.getItem(seshkeys.aptid)) {
	                $scope.data = apt[x];
	                console.log($scope.data);
	            }
	        };
	        console.log($scope.data);
	    if($window.sessionStorage.getItem(seshkeys.aptid)===null){
	        $scope.userhide=true;
	    }
	    else{
	         $scope.userhide=false;
	    };
	};
	    getAllUsers();


	});

/***/ },
/* 14 */
/***/ function(module, exports) {

	var Apartment = angular.module('ApartmentApp');
	Apartment.factory('myfact',function($http,$window,seshkeys){
	   var url =$window.sessionStorage.getItem(seshkeys.serviceurl);
	    var fact={};
	            fact.getAllApartments=function(){
	                return $http.get(url+ '/apartments')
	            };
	            fact.getUser = function(){
	                    return $http.get(url +'/apartments/allusers');
	                };

	            fact.updateUser = function(username,aptId){
	                    return $http.post(url+'/apartments/allusers/'+username+"/"+aptId);
	                };

	            fact.addApartment = function(data){
	                    console.log(data);
	                    return $http.post(url+'/apartments', data);
	                };
	                 return fact;
	});



/***/ }
/******/ ]);